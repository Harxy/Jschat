<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="/jquery/jquery.titlealert.js"></script>
    <script src="/faye.js"></script>
    <link rel='stylesheet' href='style.css' />
  </head>
  <body>
    <div class='header'>
      <input type='text' id='name' placeholder='add your name' value='Anon' />
      <input type='text' id='input' placeholder='type and press enter' />
    </div>
    <div class='info'>
      <p> Please change your name above! </p>
      <p> This is now fully open source! Please see our <a href='https://waffle.io/Harxy/Jschat/join'> waffleboard </a> to see how you can contribute. </p>
    </div>
    <div id='output'></div>
      <script>
        $(function() {
          var client = new Faye.Client('/faye');
          $('#input').keyup(function(e){
            if (e.keyCode === 13) {
              client.publish('/messages', {
                text: $('#input').val(),
                name: $('#name').val()
              });
              $('#input').val('');
              }
          });
          client.subscribe('/messages', function(message) {
            $('#output').prepend(message.name +': ' + message.text + '<br />');
            $.titleAlert("New!", {
              requireBlur:true,
              stopOnFocus:true,
              duration:15000,
              interval:700
            });
          });
          $('#input').focus();
        });
      </script>
  </body>
</html>
